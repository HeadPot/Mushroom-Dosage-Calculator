<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magic Mushroom Dosage Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Arial&display=swap" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÑ</text></svg>">
  <style>
    body { background: radial-gradient(circle at center, #1f1321, #1a1a1a); color: #e0e0e0; font-family: Arial, sans-serif; margin: 0; padding: 20px; }
    .site-header { text-align: center; font-size: 1.6em; color: #ffa500; font-family: 'Orbitron', sans-serif; margin-bottom: 30px; }
    .container { max-width: 500px; margin: 0 auto; padding: 25px; background: rgba(26, 26, 26, 0.9); border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.8); }
    .input-group { display: flex; align-items: center; margin: 20px 0; justify-content: center; }
    .input-group label { width: 120px; text-align: right; font-weight: 700; margin-right: 15px; }
    input, select { flex: 1; padding: 10px; background: #333; color: #e0e0e0; border: 1px solid #555; border-radius: 6px; }
    #weight-unit { max-width: 80px; margin-left: 10px; }
    #result { margin-top: 25px; padding: 15px; background: linear-gradient(45deg, #2a2a2a, #3a3a3a); border: 2px solid #9b59b6; border-radius: 8px; text-align: center; font-weight: 700; color: #9b59b6; animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .info-icon { cursor: pointer; margin-left: 10px; color: #9b59b6; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); justify-content: center; align-items: center; z-index: 9999; }
    .modal-content { background: #333; padding: 20px; border-radius: 8px; max-width: 500px; text-align: center; color: #e0e0e0; }
    .close { cursor: pointer; float: right; font-size: 1.5em; }
    .disclaimer { text-align: center; font-size: 0.75em; color: #ccc; margin-top: 20px; }
    #trip-description { text-align: center; margin-top: 10px; font-size: 0.9em; color: #ccc; }
    @media (max-width: 600px) {
      .container { padding: 15px; }
      .input-group { flex-direction: column; align-items: flex-start; }
      .input-group label { width: auto; margin-bottom: 5px; }
      input, select { width: 100%; }
      #weight-unit { margin-left: 0; margin-top: 5px; }
    }
  </style>
</head>
<body>
  <h1 class="site-header">Magic Mushroom Dosage Calculator</h1>
  <div class="container">
    <!-- weight input -->
    <div class="input-group">
      <label for="weight">Weight</label>
      <input type="number" id="weight" step="0.1" min="1" required aria-label="Enter your weight">
      <select id="weight-unit" aria-label="Select weight unit">
        <option value="kg">kg</option>
        <option value="lb">lb</option>
      </select>
    </div>
    <!-- strain input -->
    <div class="input-group">
      <label for="strain">Strain</label>
      <input list="strains" id="strain" required aria-label="Select or type a strain">
      <span class="info-icon" onclick="showStrainInfo()">‚ÑπÔ∏è</span>
<datalist id="strains">
  <option value="Golden Teacher (GT)" data-potency="1.0" data-evidence="Moderate" data-description="Likely Gulf Coast cubensis lineage. Gentle, spiritual trips; popular for beginners. Evidence: Moderate (species assayed; cultivar-level claims mainly community). Potency: Average (1.0).">
  <option value="B+" data-potency="1.0" data-evidence="Moderate" data-description="Classic P. cubensis cultivar. Balanced, reliable effects; frequent community trip reports. Evidence: Moderate. Potency: Average (1.0).">
  <option value="Penis Envy (PE)" data-potency="1.5" data-evidence="High" data-description="P. cubensis mutation/selection (PE family). Dense fruit, strong subjective intensity in many reports. Evidence: High (Hyphae Cup assays show high potency, up to 2.9% tryptamines). Potency: High (1.5).">
  <option value="Blue Meanie (BM)" data-potency="0.0" data-evidence="Low" data-description="Name used for multiple things (true P. cyanescens vs cubensis phenos). Reported: vivid visuals, euphoric. Evidence: Low (term conflates species). Potency: Unknown.">
  <option value="Albino Penis Envy (APE)" data-potency="1.5" data-evidence="High" data-description="Albino phenotype within PE lineage; strong community reputation for potency. Evidence: High (assays show similar to PE, often 1.5-2% tryptamines). Potency: High (1.5).">
  <option value="Mazatapec" data-potency="1.0" data-evidence="Moderate" data-description="Cubensis lineage associated with Mazatec region. Reports: introspective, moderate visuals. Evidence: Moderate. Potency: Average (1.0).">
  <option value="Amazonian" data-potency="1.2" data-evidence="Moderate" data-description="Cubensis Amazonian lineage. Reports: energetic, stronger visuals vs many cubensis strains. Evidence: Moderate. Potency: Above Average (1.2).">
  <option value="Treasure Coast" data-potency="1.1" data-evidence="Moderate" data-description="Cubensis lineage from Florida coast. Reports: smooth effects, slightly above baseline. Evidence: Moderate. Potency: Slightly Above Average (1.1).">
  <option value="Psilocybe cubensis" data-potency="1.0" data-evidence="High" data-description="Widespread species ‚Äî large strain-to-strain variability documented in assays. Evidence: High (multiple assays show wide ranges, average ~0.63% tryptamines). Potency: Average baseline (1.0).">
  <option value="Psilocybe cyanescens (CYA)" data-potency="1.6" data-evidence="High" data-description="Wavy cap wood- and mulch-lover. Multiple assays show higher tryptamine totals than typical cubensis. Evidence: High (peer-reviewed assays, ~1.24% tryptamines). Potency: High (1.6).">
  <option value="Psilocybe semilanceata (SEM)" data-potency="1.5" data-evidence="High" data-description="Liberty cap ‚Äî small but commonly high in psilocybin (wide assay range). Evidence: High (numerous studies, ~0.98% psilocybin). Potency: High (1.5).">
  <option value="Psilocybe azurescens (AZU)" data-potency="1.9" data-evidence="High" data-description="Pacific NW 'flying saucers'. Among the strongest wild Psilocybe species per assays. Evidence: High (assay data, up to 1.78% psilocybin + 0.38% psilocin). Potency: Very High (1.9).">
  <option value="Psilocybe mexicana (MEX)" data-potency="0.0" data-evidence="Low" data-description="Historic Mesoamerican species; fruits and sclerotia generally milder. Evidence: Low (few modern quantitative studies). Potency: Unknown.">
  <option value="Psilocybe tampanensis (TAM)" data-potency="0.0" data-evidence="Moderate" data-description="Noted for sclerotia ('philosopher's stone'). Sclerotia often milder than many potent fruits. Evidence: Moderate. Potency: Unknown.">
  <option value="Panaeolus cyanescens (PCY)" data-potency="2.0" data-evidence="High" data-description="Dung-loving (Copelandia synonym). Many analyses and reports place this among the most potent species. Evidence: High (assays and repeated reports, up to 2.5% psilocybin +1.194% psilocin). Potency: Extremely High (2.0).">
  <option value="Panaeolus cinctulus (PCT)" data-potency="0.6" data-evidence="Moderate" data-description="Common grass Panaeolus. Often milder than cubensis in assays/reports. Evidence: Moderate. Potency: Low (0.6).">
  <option value="Pluteus salicinus (PLS)" data-potency="0.6" data-evidence="Low" data-description="Pluteus species with low-to-moderate alkaloid reports; generally milder. Evidence: Low. Potency: Below Average (0.6).">
  <option value="Gymnopilus junonius (GJ)" data-potency="0.3" data-evidence="Low" data-description="Often reported with very low or no psilocybin; psychoactivity unreliable. Evidence: Low (assays often negative). Potency: Very Low (0.3).">
  <option value="Copelandia cyanescens" data-potency="2.0" data-evidence="High" data-description="Older name for Panaeolus cyanescens (same potent dung species). Evidence: High. Potency: Extremely High (2.0).">
  <option value="Psilocybe baeocystis" data-potency="1.3" data-evidence="High" data-description="Pacific NW species ‚Äî multiple assays show above-cubensis tryptamine levels. Evidence: High (published data). Potency: Above Average (1.3).">
  <option value="Psilocybe caerulescens" data-potency="1.1" data-evidence="Moderate" data-description="Mexican/Central American species; a handful of assays report moderate-to-above-average alkaloids. Evidence: Moderate. Potency: Slightly Above Average (1.1).">
  <option value="Psilocybe caerulipes" data-potency="0.0" data-evidence="Low" data-description="Eastern NA species; limited quantitative data ‚Äî usually mild-to-moderate. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe hoogshagenii" data-potency="0.0" data-evidence="Low" data-description="Traditional Oaxaca species; sparse modern quantitative assays. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe ovoideocystidiata" data-potency="1.0" data-evidence="Moderate" data-description="Riparian wood/woodchip species (eastern NA). Some assays/field reports ‚Äî mixed results. Evidence: Moderate. Potency: Average (1.0).">
  <option value="Psilocybe stuntzii" data-potency="0.0" data-evidence="Low" data-description="Pacific NW reports historically show lower tryptamine levels. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe subaeruginosa" data-potency="1.6" data-evidence="High" data-description="Australasia wood-lover ‚Äî many regional assays report high tryptamine totals. Evidence: High. Potency: High (1.6).">
  <option value="Psilocybe weilii" data-potency="0.0" data-evidence="Low" data-description="SE USA species; limited published assay data ‚Äî treated as unknown. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe zapotecorum" data-potency="1.4" data-evidence="Moderate" data-description="Mesoamerican wood/leaf-litter species; assays and reports indicate moderate-to-high totals in some samples. Evidence: Moderate. Potency: High (1.4).">
  <option value="Psilocybe allenii" data-potency="1.5" data-evidence="Moderate" data-description="West Coast wood-lover described in recent surveys; several assays and community reports indicate high potency. Evidence: Moderate. Potency: High (1.5).">
  <option value="Psilocybe atlantis" data-potency="0.0" data-evidence="Low" data-description="Associated with sclerotia in some reports; typically milder. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe caeruleoannulata" data-potency="0.0" data-evidence="Low" data-description="Sparse quantitative data available. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe coprophila" data-potency="0.0" data-evidence="Negligible" data-description="Modern taxonomy places many records in Deconica (non-psychoactive). Evidence: Negligible. Potency: Unknown.">
  <option value="Psilocybe crobula" data-potency="0.0" data-evidence="Low" data-description="Little quantitative data located; baseline assumed. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe cyanofibrillosa" data-potency="0.0" data-evidence="Low" data-description="Limited/older assays report low tryptamine levels; treated conservatively. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe fimetaria" data-potency="0.0" data-evidence="Low" data-description="Reports and some older assays indicate little-to-no psilocybin in many specimens. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe galindoi" data-potency="0.0" data-evidence="Low" data-description="Name often applied to sclerotia/cultivated isolates; variable reports and sclerotia often milder. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe guilartensis" data-potency="0.0" data-evidence="Low" data-description="Puerto Rico species; limited modern assays. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe hispanica" data-potency="0.0" data-evidence="Low" data-description="Historic/regionally-reported species; modern quantitative data sparse. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe liniformans" data-potency="0.0" data-evidence="Low" data-description="Closely related to semilanceata group; assay data limited and sometimes low. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe meridionalis" data-potency="0.0" data-evidence="Low" data-description="Relatively recently described; not enough assays to rescale. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe mescaleroensis" data-potency="0.0" data-evidence="Low" data-description="Sparse quantitative data. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe natalensis" data-potency="0.0" data-evidence="Low" data-description="Recently described; early comparisons indicate cubensis-like totals. Anecdotally claimed strong. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe oaxacana" data-potency="0.0" data-evidence="Low" data-description="Sparse assays; baseline retained. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe pelliculosa" data-potency="0.0" data-evidence="Low" data-description="Several assay reports indicate low psilocybin (e.g., ~0.1‚Äì0.2% dry weight). Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe portoricensis" data-potency="0.0" data-evidence="Low" data-description="Little quantitative work available publicly. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe samuiensis" data-potency="0.0" data-evidence="Low" data-description="SE Asia species; quantitative data sparse. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe serbica" data-potency="1.5" data-evidence="High" data-description="Central/Eastern Europe complex (var. bohemica etc.); modern assays show high psilocybin in some varieties. Evidence: High (assays). Potency: High (1.5).">
  <option value="Psilocybe sierrae" data-potency="0.0" data-evidence="Low" data-description="Limited modern assay data. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe silvatica" data-potency="0.0" data-evidence="Low" data-description="Sparse assay data; baseline retained. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe strictipes" data-potency="1.2" data-evidence="Moderate" data-description="Related to liberty-cap group; some comparative work suggests above-cubensis potency. Evidence: Moderate. Potency: Above Average (1.2).">
  <option value="Psilocybe subcubensis" data-potency="0.0" data-evidence="Low" data-description="Taxon allied to P. cubensis; baseline retained. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe subtropicalis" data-potency="5.0" data-evidence="Moderate" data-description="Subtropical species; enhanced variants through breeding reach ~5% alkaloids. Evidence: Moderate (breeding reports and assays). Potency: Extremely High (5.0).">
  <option value="Psilocybe thaizapoteca" data-potency="0.0" data-evidence="Low" data-description="Sparse data available publicly. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe uxpanapensis" data-potency="0.0" data-evidence="Low" data-description="Sparse quantitative reporting. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe venenata" data-potency="0.0" data-evidence="Low" data-description="Little modern assay data. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe villarrealiae" data-potency="0.0" data-evidence="Low" data-description="Insufficient quantitative data to rescale. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe weraroa" data-potency="0.0" data-evidence="Low" data-description="Pouched fungus (old records); modern chemical data limited and mixed. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe yungensis" data-potency="0.0" data-evidence="Low" data-description="Sparse modern assay data. Evidence: Low. Potency: Unknown.">
  <option value="Albino A+" data-potency="0.0" data-evidence="Low" data-description="Cubensis phenotype‚Äîno convincing evidence it‚Äôs systematically stronger than baseline. Evidence: Low. Potency: Unknown.">
  <option value="Burma" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety. Evidence: Low. Potency: Unknown.">
  <option value="Cambodian" data-potency="0.8" data-evidence="Low" data-description="Cubensis variety ‚Äî fast colonizer; community favorite, reported as lower potency. Evidence: Low (anecdotal reports). Potency: Below Average (0.8).">
  <option value="Costa Rican" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety. Evidence: Low. Potency: Unknown.">
  <option value="Ecuadorian" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety. Evidence: Low. Potency: Unknown.">
  <option value="Fiji" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety. Evidence: Low. Potency: Unknown.">
  <option value="Hawaiian" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety. Evidence: Low. Potency: Unknown.">
  <option value="Huautla" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety tied to Mazatec region localities. Evidence: Low. Potency: Unknown.">
  <option value="Jedi Mind Fuck" data-potency="1.5" data-evidence="Low" data-description="Cubensis lineage; community reports vary widely, noted as potent. Evidence: Low (anecdotal). Potency: High (1.5).">
  <option value="Koh Samui" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety originally from Thailand; baseline retained. Evidence: Low. Potency: Unknown.">
  <option value="Malabar" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety. Evidence: Low. Potency: Unknown.">
  <option value="Mexican" data-potency="0.0" data-evidence="Low" data-description="Generic Mexican cubensis varieties; wide variation. Evidence: Low. Potency: Unknown.">
  <option value="Orissa India" data-potency="0.0" data-evidence="Low" data-description="Cubensis lineage from India. Evidence: Low. Potency: Unknown.">
  <option value="PES Amazonian" data-potency="0.0" data-evidence="Low" data-description="Vendor/cultivar label for an Amazonian cubensis isolate. Evidence: Low. Potency: Unknown.">
  <option value="PES Hawaiian" data-potency="0.0" data-evidence="Low" data-description="Vendor/cultivar label for a Hawaiian cubensis isolate. Evidence: Low. Potency: Unknown.">
  <option value="Puerto Rican" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety. Evidence: Low. Potency: Unknown.">
  <option value="South American" data-potency="0.0" data-evidence="Low" data-description="Generic cubensis lineage tag; baseline retained. Evidence: Low. Potency: Unknown.">
  <option value="Thai" data-potency="0.0" data-evidence="Low" data-description="Cubensis-style strains from Thailand. Evidence: Low. Potency: Unknown.">
  <option value="Transkei" data-potency="0.0" data-evidence="Low" data-description="Cubensis variety from Transkei. Evidence: Low. Potency: Unknown.">
  <option value="Z-Strain" data-potency="0.0" data-evidence="Low" data-description="Vendor/strain label for cubensis lineage. Evidence: Low. Potency: Unknown.">
  <option value="Blue Pulaski" data-potency="1.2" data-evidence="Low" data-description="Variant reported with blue caps; community reports place it above many cubensis lines. Evidence: Low. Potency: Above Average (1.2).">
  <option value="Ghost" data-potency="1.7" data-evidence="Moderate" data-description="Breeder-isolate family (TAT/Ghost lineage) with strong community potency claims. Evidence: Moderate (community/breeder + some assays). Potency: High (1.7).">
  <option value="Tidal Wave" data-potency="1.6" data-evidence="High" data-description="Hybrid (Penis Envy √ó B+) that produced the Enigma/Brainiac phenotypes. Community: potent/unstable phenotypes. Evidence: High (Hyphae Cup winner at 3.8% tryptamines for Enigma mutation). Potency: High (1.6).">
  <option value="PF Classic" data-potency="0.0" data-evidence="Low" data-description="Well-known lab/cultivar (PF Classic). Popular among growers; potency not verified. Evidence: Low. Potency: Unknown.">
  <option value="Enigma" data-potency="3.0" data-evidence="High" data-description="Mutation/phenotype arising from Tidal Wave family; unusual 'blob/brain' morphology and strong subjective reports. Evidence: High (Hyphae Cup winner at 3.8% tryptamines). Potency: Extremely High (3.0).">
  <option value="Brainiac" data-potency="1.6" data-evidence="Low" data-description="Phenotype/derivative of Tidal Wave isolations; community reports emphasize intensity and odd morphology. Evidence: Low. Potency: High (1.6).">
  <option value="Long Ghost" data-potency="1.7" data-evidence="Low" data-description="TAT/Ghost family isolate with elongated stipes; breeder/community claim high potency. Evidence: Low. Potency: High (1.7).">
  <option value="Blue Ghost" data-potency="1.7" data-evidence="Low" data-description="Hybrid/selection from Ghost lineage and blue-cap isolates; breeder reports emphasize visual contrast and potency. Evidence: Low. Potency: High (1.7).">
  <option value="Golden Ghost" data-potency="1.7" data-evidence="Low" data-description="Cross between Golden Teacher-derived lineage and Ghost/TAT isolates; visually striking, community reports above-average potency. Evidence: Low. Potency: High (1.7).">
  <option value="Swamp Ghost" data-potency="1.6" data-evidence="Low" data-description="Selection from Ghost lines and swamp/wild isolates (breeder lineage). Community: potent selection. Evidence: Low. Potency: High (1.6).">
  <option value="Jack Frost (TAT √ó APE)" data-potency="1.0" data-evidence="Moderate" data-description="Reported cross of TAT (True Albino Teacher) and Albino PE; breeder claims strong potency and striking albino phenotype. Evidence: Moderate (lab tests around 1% tryptamines). Potency: Average (1.0).">
  <option value="Yeti (TAT isolation)" data-potency="1.6" data-evidence="Low" data-description="TAT-family isolate (large-fruited albino phenotype); community/breeder reputation for potency. Evidence: Low. Potency: High (1.6).">
  <option value="Shakti / Blue Shakti" data-potency="1.3" data-evidence="Low" data-description="Shakti family isolates and blue variants (albino/Malabar-derived isolations); community note above-average potency. Evidence: Low. Potency: Above Average (1.3).">
  <option value="RipTide / Riptide" data-potency="1.4" data-evidence="Low" data-description="Squat, dense phenotypes with multiple isolations (incl. Albino Riptide). Community: body-heavy trips and consistency. Evidence: Low. Potency: High (1.4).">
  <option value="Albino Riptide" data-potency="1.4" data-evidence="Low" data-description="Albino isolate of Riptide family ‚Äî visual appeal, reported solid potency. Evidence: Low. Potency: High (1.4).">
  <option value="Makilla Gorilla" data-potency="1.6" data-evidence="Moderate" data-description="Modern breeder/vendor isolation (PE/Melmac-style lineage) ‚Äî large fruits and strong community potency claims. Evidence: Moderate (assays up to 1.93% psilocybin). Potency: High (1.6).">
  <option value="TWAPE (Tidal Wave √ó APE)" data-potency="1.8" data-evidence="Low" data-description="Cross of Tidal Wave with Albino PE; breeder/community claims of very high potency for some isolations. Evidence: Low. Potency: Very High (1.8).">
  <option value="TWAPE variants" data-potency="1.7" data-evidence="Low" data-description="Multiple downstream isolations from TW√óAPE crosses; variable phenotypes, generally high reputation. Evidence: Low. Potency: High (1.7).">
  <option value="Golden Jack (GT √ó Jack Frost)" data-potency="1.1" data-evidence="Low" data-description="Breeder cross (Golden Teacher √ó Jack Frost) ‚Äî visually notable; potency near baseline or slightly above by community reports. Evidence: Low. Potency: Slightly Above Average (1.1).">
  <option value="Squatty Riptide" data-potency="1.4" data-evidence="Low" data-description="Squat phenotype of Riptide family with dense fruits; community: body-heavy, stable isolates exist. Evidence: Low. Potency: High (1.4).">
  <option value="Steel Magnolia (PE √ó Blue Magnolia)" data-potency="1.5" data-evidence="Low" data-description="Breeder cross combining PE lineage with Blue Magnolia isolates; community claims above-average potency. Evidence: Low. Potency: High (1.5).">
  <option value="DC MAK (PE isolation family)" data-potency="1.5" data-evidence="Low" data-description="Vendor/breeder isolation name tied to PE-family isolations; community reports strong potency. Evidence: Low. Potency: High (1.5).">
  <option value="Melmac" data-potency="1.5" data-evidence="Low" data-description="PE-family isolations and derivatives (commonly referenced in breeder/vendor circles). Evidence: Low. Potency: High (1.5).">
  <option value="Uncut Envy / Uncut PE" data-potency="1.6" data-evidence="Low" data-description="PE phenotype/line name seen in community/vendor lists ‚Äî often reported stronger-than-average. Evidence: Low. Potency: High (1.6).">
  <option value="Albino Chode Wave (example albino lines)" data-potency="1.5" data-evidence="Low" data-description="Representative albino isolates from modern breeder catalogs (visual novelty + often above-baseline potency reputation). Evidence: Low. Potency: Above Average (1.5).">
  <option value="Blue Pulaski x Ghost hybrids" data-potency="1.7" data-evidence="Low" data-description="Hybrid projects combining blue-cap isolates with TAT/Ghost lines; breeder reports highlight potent visual profiles. Evidence: Low. Potency: High (1.7).">
  <option value="Hillbilly" data-potency="1.0" data-evidence="Low" data-description="Cubensis variety from Arkansas; reports of average potency with giggly effects. Evidence: Low (community/anecdotal). Potency: Average (1.0).">
  <option value="Rusty Whyte" data-potency="1.0" data-evidence="Low" data-description="Leucistic cubensis hybrid (Albino A+ √ó Colombian Rust); average potency, visually striking. Evidence: Low (community reports). Potency: Average (1.0).">
  <option value="Avery's Albino" data-potency="0.0" data-evidence="Low" data-description="Rare albino cubensis mutation from Cambodian lineage; beautiful but potency unverified. Evidence: Low. Potency: Unknown.">
  <option value="Psilocybe ingeli" data-potency="0.0" data-evidence="Low" data-description="Newly discovered African species; traditional use reported but no quantitative potency data. Evidence: Low (recent discovery). Potency: Unknown.">
  <option value="Psilocybe maluti" data-potency="0.0" data-evidence="Low" data-description="Newly discovered African species; used in traditional brews, potency unknown. Evidence: Low (recent discovery). Potency: Unknown.">
  <option value="TTBVI" data-potency="5.0" data-evidence="Moderate" data-description="Hybrid with P. azurescens genes; competition winner with over 5% alkaloids. Evidence: Moderate (assays and breeding reports). Potency: Extremely High (5.0).">
  <option value="Pearly Gates" data-potency="1.8" data-evidence="Low" data-description="Potent cubensis hybrid; won recreational category in potency contests. Evidence: Low (community/breeder). Potency: Very High (1.8).">
  <option value="Gymnopilus luteofolius" data-potency="0.0" data-evidence="Low" data-description="Psilocybin-containing Gymnopilus species; potency data sparse. Evidence: Low. Potency: Unknown.">
  <option value="Inocybe aeruginascens" data-potency="0.0" data-evidence="Low" data-description="Psilocybin-containing Inocybe; most in genus poisonous, potency unknown. Evidence: Low. Potency: Unknown.">
  <option value="Pluteus americanus" data-potency="0.0" data-evidence="Low" data-description="Psilocybin-containing Pluteus species; potency data limited. Evidence: Low. Potency: Unknown.">
</datalist>





    </div>
    <!-- trip level -->
    <div class="input-group">
      <label for="trip-level">Trip Level</label>
      <select id="trip-level" required aria-label="Select trip level">
        <option value="" selected></option>
        <option value="1">Microdose</option>
        <option value="2">Low</option>
        <option value="3">Normal</option>
        <option value="4">High</option>
        <option value="5">Heroic</option>
      </select>
    </div>
    <div id="trip-description"></div>
    <div id="result"></div>
    <div style="text-align: center; margin-top: 10px;">
      <input type="checkbox" id="lemon-tek" aria-label="Use Lemon Tek">
      <label for="lemon-tek" style="margin-left: 5px;">Use Lemon Tek</label>
      <span class="info-icon" onclick="showLemonTekInfo()">‚ÑπÔ∏è</span>
    </div>
  </div>

  <!-- footer disclaimer -->
  <div class="disclaimer">
    <strong>Important Disclaimer:</strong> This calculator is for informational purposes only and provides an estimate based on <strong>averages and assumptions</strong>. Strain potencies are based on general reports, but actual potency can vary significantly due to growing conditions, genetics, and preparation methods. Trip levels and dosages are also based on averages and may not reflect individual experiences. Always start with a lower dose and use responsibly.
  </div>

  <!-- Strain Info Modal -->
  <div id="strain-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('strain-modal')">√ó</span>
      <p id="strain-info-text"></p>
      <p><em>Note: Potency values are based on averages and may not reflect the exact potency of your specific batch.</em></p>
    </div>
  </div>

  <!-- Lemon Tek Info Modal -->
  <div id="lemon-tek-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('lemon-tek-modal')">√ó</span>
      <p>Lemon Tek involves soaking ground mushrooms in lemon juice for 20-30 minutes. It may enhance psilocybin conversion to psilocin, leading to a faster onset and stronger effects. Dosage is reduced by 20% to compensate.</p>
    </div>
  </div>

  <!-- Popup Disclaimer Modal -->
  <div id="disclaimer-popup" class="modal">
    <div class="modal-content">
      <h2>Disclaimer</h2>
      <p>
        <strong>This calculator gives rough estimates only. Potency and effects can change with strain, batch, preparation,
		and <u>many personal factors</u>. Dosage guides are general and may not match your experience. Start low and use responsibly.</strong>

      </p>
      <p id="countdown-text">15 </p>
      <button id="close-disclaimer" style="display:none;">OK</button>
    </div>
  </div>

  <script>
    const tripDescriptions = {
      1: "Microdose: Sub-perceptual effects, may enhance focus and creativity.",
      2: "Low: Mild effects, slight visual enhancements.",
      3: "Normal: Standard psychedelic experience, visual and mental effects.",
      4: "High: Strong effects, potential for profound insights or challenges.",
      5: "Heroic: Very intense, potentially overwhelming. Not for beginners."
    };

    const elements = {
      weight: document.getElementById('weight'),
      weightUnit: document.getElementById('weight-unit'),
      strain: document.getElementById('strain'),
      tripLevel: document.getElementById('trip-level'),
      lemonTek: document.getElementById('lemon-tek'),
      result: document.getElementById('result'),
      tripDescription: document.getElementById('trip-description')
    };

    document.querySelector('.container').addEventListener('input', (e) => {
      if (e.target.matches('#trip-level')) {
        elements.tripDescription.textContent = tripDescriptions[e.target.value] || '';
      }
      calculate();
    });

    function calculate() {
      const weight = parseFloat(elements.weight.value);
      const unit = elements.weightUnit.value;
      const strain = elements.strain.value;
      const level = elements.tripLevel.value;
      const useLemonTek = elements.lemonTek.checked;

      if (!weight || !strain || !level) {
        elements.result.innerHTML = 'Please fill all fields.';
        return;
      }

      const weightInKg = unit === 'lb' ? weight * 0.453592 : weight;
      const strainOption = document.querySelector(`datalist#strains option[value="${strain}"]`);
      const potency = strainOption ? parseFloat(strainOption.getAttribute('data-potency')) : 1.0;
      const baseDosages = { 1: 0.25, 2: 0.7, 3: 1.5, 4: 3, 5: 4.5 };
      let dose = (baseDosages[level] * (weightInKg / 70)) / potency;

      if (useLemonTek) dose *= 0.8;

      let resultText = `Recommended: <span>${dose.toFixed(2)} g</span>`;
      if (unit === 'lb') {
        const doseOz = (dose * 0.035274).toFixed(2);
        resultText += ` <span>(${doseOz} oz)</span>`;
      }
      elements.result.innerHTML = resultText;
    }

    function showStrainInfo() {
      const selectedStrain = document.querySelector(`datalist#strains option[value="${elements.strain.value}"]`);
      const info = selectedStrain ? selectedStrain.getAttribute('data-description') : "No specific data available.";
      document.getElementById('strain-info-text').textContent = info;
      document.getElementById('strain-modal').style.display = 'flex';
    }

    function showLemonTekInfo() {
      document.getElementById('lemon-tek-modal').style.display = 'flex';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // Set default unit based on country
    document.addEventListener('DOMContentLoaded', () => {
      fetch('https://ipapi.co/json/')
        .then(response => response.json())
        .then(data => {
          elements.weightUnit.value = ['US', 'LR', 'MM'].includes(data.country_code) ? 'lb' : 'kg';
        })
        .catch(() => {
          elements.weightUnit.value = 'kg';
        });

      // Popup disclaimer logic
      const POPUP_KEY = "disclaimer_last_seen";
      const now = Date.now();
      const lastSeen = localStorage.getItem(POPUP_KEY);

      if (!lastSeen || now - lastSeen > 86400000) {
        const popup = document.getElementById("disclaimer-popup");
        const closeBtn = document.getElementById("close-disclaimer");
        const countdownText = document.getElementById("countdown-text");

        popup.style.display = "flex";

        let timer = 10;
        const interval = setInterval(() => {
          timer--;
          if (timer > 0) {
            countdownText.textContent = "" + timer + "";
          } else {
            clearInterval(interval);
            countdownText.textContent = "";
            closeBtn.style.display = "inline-block";
          }
        }, 1000);

        closeBtn.addEventListener("click", () => {
          popup.style.display = "none";
          localStorage.setItem(POPUP_KEY, now.toString());
        });
      }
    });
  </script>
</body>
</html>
